% 用来测试的路径
a = [0,5,5;0.100000000000000,4.90000000000000,5.25000000000000;0.300000000000000,4.90000000000000,5.25000000000000;0.500000000000000,4.90000000000000,5.25000000000000;0.700000000000000,4.90000000000000,5.25000000000000;0.900000000000000,4.90000000000000,5.25000000000000;1.10000000000000,4.90000000000000,5.25000000000000;1.30000000000000,4.90000000000000,5.25000000000000;1.50000000000000,4.90000000000000,5.25000000000000;1.70000000000000,4.90000000000000,5.25000000000000;1.90000000000000,4.90000000000000,5.25000000000000;2.10000000000000,4.90000000000000,5.25000000000000;2.30000000000000,4.90000000000000,5.25000000000000;2.50000000000000,4.90000000000000,5.25000000000000;2.70000000000000,4.90000000000000,5.25000000000000;2.70000000000000,4.90000000000000,4.75000000000000;2.70000000000000,4.90000000000000,4.25000000000000;2.70000000000000,4.90000000000000,3.75000000000000;2.70000000000000,4.90000000000000,3.25000000000000;2.70000000000000,4.90000000000000,2.75000000000000;2.70000000000000,4.90000000000000,2.25000000000000;2.70000000000000,4.90000000000000,1.75000000000000;2.70000000000000,4.90000000000000,1.25000000000000;2.90000000000000,4.90000000000000,1.25000000000000;3.10000000000000,4.90000000000000,1.25000000000000;3.30000000000000,4.90000000000000,1.25000000000000;3.50000000000000,4.90000000000000,1.25000000000000;3.70000000000000,4.90000000000000,1.25000000000000;3.90000000000000,4.90000000000000,1.25000000000000;4.10000000000000,4.90000000000000,1.25000000000000;4.30000000000000,4.90000000000000,1.25000000000000;4.50000000000000,4.90000000000000,1.25000000000000;4.70000000000000,4.90000000000000,1.25000000000000;4.90000000000000,4.90000000000000,1.25000000000000;5.10000000000000,4.90000000000000,1.25000000000000;5.30000000000000,4.90000000000000,1.25000000000000;5.50000000000000,4.90000000000000,1.25000000000000;5.70000000000000,4.90000000000000,1.25000000000000;5.70000000000000,4.90000000000000,1.75000000000000;5.70000000000000,4.90000000000000,2.25000000000000;5.70000000000000,4.90000000000000,2.75000000000000;5.70000000000000,4.90000000000000,3.25000000000000;5.70000000000000,4.90000000000000,3.75000000000000;5.70000000000000,4.90000000000000,4.25000000000000;5.70000000000000,4.90000000000000,4.75000000000000;5.90000000000000,4.90000000000000,4.75000000000000;6.10000000000000,4.90000000000000,4.75000000000000;6.30000000000000,4.90000000000000,4.75000000000000;6.50000000000000,4.90000000000000,4.75000000000000;6.70000000000000,4.90000000000000,4.75000000000000;6.90000000000000,4.90000000000000,4.75000000000000;7.10000000000000,4.90000000000000,4.75000000000000;7.30000000000000,4.90000000000000,4.75000000000000;7.50000000000000,4.90000000000000,4.75000000000000;7.70000000000000,4.90000000000000,4.75000000000000;7.90000000000000,4.90000000000000,4.75000000000000;8.10000000000000,4.90000000000000,4.75000000000000;8.30000000000000,4.90000000000000,4.75000000000000;8.50000000000000,4.90000000000000,4.75000000000000;8.70000000000000,4.90000000000000,4.75000000000000;8.70000000000000,4.90000000000000,4.25000000000000;8.70000000000000,4.90000000000000,3.75000000000000;8.70000000000000,4.90000000000000,3.25000000000000;8.70000000000000,4.90000000000000,2.75000000000000;8.70000000000000,4.90000000000000,2.25000000000000;8.70000000000000,4.90000000000000,1.75000000000000;8.70000000000000,4.90000000000000,1.25000000000000;8.90000000000000,4.90000000000000,1.25000000000000;9.10000000000000,4.90000000000000,1.25000000000000;9.30000000000000,4.90000000000000,1.25000000000000;9.50000000000000,4.90000000000000,1.25000000000000;9.70000000000000,4.90000000000000,1.25000000000000;9.90000000000000,4.90000000000000,1.25000000000000;10.1000000000000,4.90000000000000,1.25000000000000;10.3000000000000,4.90000000000000,1.25000000000000;10.5000000000000,4.90000000000000,1.25000000000000;10.7000000000000,4.90000000000000,1.25000000000000;10.9000000000000,4.90000000000000,1.25000000000000;11.1000000000000,4.90000000000000,1.25000000000000;11.3000000000000,4.90000000000000,1.25000000000000;11.5000000000000,4.90000000000000,1.25000000000000;11.7000000000000,4.90000000000000,1.25000000000000;11.7000000000000,4.90000000000000,1.75000000000000;11.7000000000000,4.90000000000000,2.25000000000000;11.7000000000000,4.90000000000000,2.75000000000000;11.7000000000000,4.90000000000000,3.25000000000000;11.7000000000000,4.90000000000000,3.75000000000000;11.7000000000000,4.90000000000000,4.25000000000000;11.7000000000000,4.90000000000000,4.75000000000000;11.9000000000000,4.90000000000000,4.75000000000000;12.1000000000000,4.90000000000000,4.75000000000000;12.3000000000000,4.90000000000000,4.75000000000000;12.5000000000000,4.90000000000000,4.75000000000000;12.7000000000000,4.90000000000000,4.75000000000000;12.9000000000000,4.90000000000000,4.75000000000000;13.1000000000000,4.90000000000000,4.75000000000000;13.3000000000000,4.90000000000000,4.75000000000000;13.5000000000000,4.90000000000000,4.75000000000000;13.7000000000000,4.90000000000000,4.75000000000000;13.9000000000000,4.90000000000000,4.75000000000000;14.1000000000000,4.90000000000000,4.75000000000000;14.3000000000000,4.90000000000000,4.75000000000000;14.5000000000000,4.90000000000000,4.75000000000000;14.7000000000000,4.90000000000000,4.75000000000000;14.7000000000000,4.90000000000000,4.25000000000000;14.7000000000000,4.90000000000000,3.75000000000000;14.7000000000000,4.90000000000000,3.25000000000000;14.7000000000000,4.90000000000000,2.75000000000000;14.7000000000000,4.90000000000000,2.25000000000000;14.7000000000000,4.90000000000000,1.75000000000000;14.7000000000000,4.90000000000000,1.25000000000000;14.9000000000000,4.90000000000000,1.25000000000000;15.1000000000000,4.90000000000000,1.25000000000000;15.3000000000000,4.90000000000000,1.25000000000000;15.5000000000000,4.90000000000000,1.25000000000000;15.7000000000000,4.90000000000000,1.25000000000000;15.9000000000000,4.90000000000000,1.25000000000000;16.1000000000000,4.90000000000000,1.25000000000000;16.3000000000000,4.90000000000000,1.25000000000000;16.5000000000000,4.90000000000000,1.25000000000000;16.7000000000000,4.90000000000000,1.25000000000000;16.9000000000000,4.90000000000000,1.25000000000000;17.1000000000000,4.90000000000000,1.25000000000000;17.3000000000000,4.90000000000000,1.25000000000000;17.5000000000000,4.90000000000000,1.25000000000000;17.7000000000000,4.90000000000000,1.25000000000000;17.7000000000000,4.90000000000000,1.75000000000000;17.7000000000000,4.90000000000000,2.25000000000000;17.7000000000000,4.90000000000000,2.75000000000000;17.7000000000000,4.90000000000000,3.25000000000000;17.7000000000000,4.90000000000000,3.75000000000000;17.7000000000000,4.90000000000000,4.25000000000000;17.7000000000000,4.90000000000000,4.75000000000000;17.9000000000000,4.90000000000000,4.75000000000000;18.1000000000000,4.90000000000000,4.75000000000000;18.3000000000000,4.90000000000000,4.75000000000000;18.5000000000000,4.90000000000000,4.75000000000000;18.7000000000000,4.90000000000000,4.75000000000000;18.9000000000000,4.90000000000000,4.75000000000000;19.1000000000000,4.90000000000000,4.75000000000000;19.3000000000000,4.90000000000000,4.75000000000000;19.5000000000000,4.90000000000000,4.75000000000000;19.7000000000000,4.90000000000000,4.75000000000000;19.9000000000000,4.90000000000000,4.75000000000000;19.9000000000000,4.90000000000000,5.25000000000000;20,5,5]

% 画框初始化

h_fig = figure('Name', 'Environment');

h_3d = gca;
drawnow;
xlabel('x [m]'); ylabel('y [m]'); zlabel('z [m]')
quadcolors = lines(nquad);
set(gcf,'Renderer','OpenGL')

% 初始化模拟环境
time_tol = 30;          % 总的模拟时间
starttime = 0;          % 开始时间
tstep     = 0.01;       % 每个计算间隔时间
cstep     = 0.05;       % 两次绘图的时间间隔
nstep = cstep/tstep;

% 错误估计
pos_tol = 0;

% 开始仿真
OUTPUT_TO_VIDEO = 1;
if OUTPUT_TO_VIDEO == 1
    v = VideoWriter('map1.avi');
    open(v)
end

for iter = 1:length(a)
    timeint = time:tstep:time+tstep;
    tic;
    QP{qn} = QuadPlot(qn, x0{qn}, 0.1, 0.04, quadcolors(qn,:), max_iter, h_3d);

end